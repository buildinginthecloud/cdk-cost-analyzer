// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing

exports[`Snapshot 1`] = `
{
  "Outputs": {
    "BastionSecurityGroupId": {
      "Description": "Security group ID for bastion hosts",
      "Value": {
        "Fn::GetAtt": [
          "BastionHostsBastionSecurityGroupDD8BDECD",
          "GroupId",
        ],
      },
    },
    "HelloWorldServiceLoadBalancerDNS55FD1E3C": {
      "Value": {
        "Fn::GetAtt": [
          "HelloWorldServiceLB7C80B268",
          "DNSName",
        ],
      },
    },
    "HelloWorldServiceServiceURL51B6A3C0": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "http://",
            {
              "Fn::GetAtt": [
                "HelloWorldServiceLB7C80B268",
                "DNSName",
              ],
            },
          ],
        ],
      },
    },
    "LoadBalancerDNS": {
      "Description": "Load balancer DNS name",
      "Value": {
        "Fn::GetAtt": [
          "HelloWorldServiceLB7C80B268",
          "DNSName",
        ],
      },
    },
    "SloganApiEndpoint": {
      "Description": "Slogan API endpoint",
      "Export": {
        "Name": "SloganApiUrl",
      },
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "SloganApiCE741B91",
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region",
            },
            ".",
            {
              "Ref": "AWS::URLSuffix",
            },
            "/",
            {
              "Ref": "SloganApiDeploymentStageprod489F153F",
            },
            "/",
          ],
        ],
      },
    },
    "SloganApiEndpointBBF1DE13": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "SloganApiCE741B91",
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region",
            },
            ".",
            {
              "Ref": "AWS::URLSuffix",
            },
            "/",
            {
              "Ref": "SloganApiDeploymentStageprod489F153F",
            },
            "/",
          ],
        ],
      },
    },
    "SloganTableName": {
      "Description": "DynamoDB table name for slogans",
      "Value": {
        "Ref": "SloganApiSloganTableCB6C1B43",
      },
    },
  },
  "Parameters": {
    "BootstrapVersion": {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "SsmParameterValueawsserviceamiamazonlinuxlatestal2023amikernel61x8664C96584B6F00A464EAD1953AFF4B05118Parameter": {
      "Default": "/aws/service/ami-amazon-linux-latest/al2023-ami-kernel-6.1-x86_64",
      "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
    },
  },
  "Resources": {
    "BastionHostsBastionASG0E48E18B": {
      "Properties": {
        "DesiredCapacity": "2",
        "HealthCheckGracePeriod": 300,
        "HealthCheckType": "EC2",
        "LaunchConfigurationName": {
          "Ref": "BastionHostsBastionASGLaunchConfig16D84AEC",
        },
        "MaxSize": "2",
        "MinSize": "2",
        "Tags": [
          {
            "Key": "Name",
            "PropagateAtLaunch": true,
            "Value": "test/BastionHosts/BastionASG",
          },
        ],
        "VPCZoneIdentifier": [
          {
            "Ref": "EcsVpcPublicSubnet1Subnet4FC26CFD",
          },
          {
            "Ref": "EcsVpcPublicSubnet2Subnet127B1F4A",
          },
        ],
      },
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "UpdatePolicy": {
        "AutoScalingRollingUpdate": {
          "MaxBatchSize": 1,
          "MinInstancesInService": 1,
          "PauseTime": "PT5M",
          "SuspendProcesses": [
            "HealthCheck",
            "ReplaceUnhealthy",
            "AZRebalance",
            "AlarmNotification",
            "ScheduledActions",
            "InstanceRefresh",
          ],
        },
        "AutoScalingScheduledAction": {
          "IgnoreUnmodifiedGroupSizeProperties": true,
        },
      },
    },
    "BastionHostsBastionASGInstanceProfile57F1D73F": {
      "Properties": {
        "Roles": [
          {
            "Ref": "BastionHostsBastionRole17A80369",
          },
        ],
      },
      "Type": "AWS::IAM::InstanceProfile",
    },
    "BastionHostsBastionASGLaunchConfig16D84AEC": {
      "DependsOn": [
        "BastionHostsBastionRole17A80369",
      ],
      "Properties": {
        "IamInstanceProfile": {
          "Ref": "BastionHostsBastionASGInstanceProfile57F1D73F",
        },
        "ImageId": {
          "Ref": "SsmParameterValueawsserviceamiamazonlinuxlatestal2023amikernel61x8664C96584B6F00A464EAD1953AFF4B05118Parameter",
        },
        "InstanceType": "t3.micro",
        "SecurityGroups": [
          {
            "Fn::GetAtt": [
              "BastionHostsBastionSecurityGroupDD8BDECD",
              "GroupId",
            ],
          },
        ],
        "UserData": {
          "Fn::Base64": "#!/bin/bash
#!/bin/bash
yum update -y
yum install -y amazon-ssm-agent
systemctl enable amazon-ssm-agent
systemctl start amazon-ssm-agent

# Install useful tools
yum install -y htop tmux vim

# Configure SSH banner
echo "================================================" > /etc/ssh/banner
echo "  Bastion Host - Authorized Access Only" >> /etc/ssh/banner
echo "  All activities are logged and monitored" >> /etc/ssh/banner
echo "================================================" >> /etc/ssh/banner
echo "Banner /etc/ssh/banner" >> /etc/ssh/sshd_config
systemctl restart sshd",
        },
      },
      "Type": "AWS::AutoScaling::LaunchConfiguration",
    },
    "BastionHostsBastionRole17A80369": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ec2.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Description": "IAM role for bastion hosts",
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/AmazonSSMManagedInstanceCore",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BastionHostsBastionSecurityGroupDD8BDECD": {
      "Properties": {
        "GroupDescription": "Security group for bastion hosts",
        "SecurityGroupEgress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow SSH access to bastion hosts",
            "FromPort": 22,
            "IpProtocol": "tcp",
            "ToPort": 22,
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "EcsCluster97242B84": {
      "Properties": {
        "ClusterSettings": [
          {
            "Name": "containerInsights",
            "Value": "enhanced",
          },
        ],
      },
      "Type": "AWS::ECS::Cluster",
    },
    "EcsVpcCEF3634B": {
      "Properties": {
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsHostnames": true,
        "EnableDnsSupport": true,
        "InstanceTenancy": "default",
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc",
          },
        ],
      },
      "Type": "AWS::EC2::VPC",
    },
    "EcsVpcIGWF80402C4": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc",
          },
        ],
      },
      "Type": "AWS::EC2::InternetGateway",
    },
    "EcsVpcPrivateSubnet1DefaultRoute523B7F1A": {
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "EcsVpcPublicSubnet1NATGateway84F4640B",
        },
        "RouteTableId": {
          "Ref": "EcsVpcPrivateSubnet1RouteTable44D603B2",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "EcsVpcPrivateSubnet1RouteTable44D603B2": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PrivateSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "EcsVpcPrivateSubnet1RouteTableAssociationA072EBC4": {
      "Properties": {
        "RouteTableId": {
          "Ref": "EcsVpcPrivateSubnet1RouteTable44D603B2",
        },
        "SubnetId": {
          "Ref": "EcsVpcPrivateSubnet1SubnetDE1C6717",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "EcsVpcPrivateSubnet1SubnetDE1C6717": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            0,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.128.0/18",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PrivateSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "EcsVpcPrivateSubnet2DefaultRoute1D92C4ED": {
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "EcsVpcPublicSubnet1NATGateway84F4640B",
        },
        "RouteTableId": {
          "Ref": "EcsVpcPrivateSubnet2RouteTable1CB3B77F",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "EcsVpcPrivateSubnet2RouteTable1CB3B77F": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PrivateSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "EcsVpcPrivateSubnet2RouteTableAssociation136FEFD9": {
      "Properties": {
        "RouteTableId": {
          "Ref": "EcsVpcPrivateSubnet2RouteTable1CB3B77F",
        },
        "SubnetId": {
          "Ref": "EcsVpcPrivateSubnet2Subnet4E5EDAB1",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "EcsVpcPrivateSubnet2Subnet4E5EDAB1": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            1,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.192.0/18",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PrivateSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "EcsVpcPublicSubnet1DefaultRoute29B4D851": {
      "DependsOn": [
        "EcsVpcVPCGWE2526015",
      ],
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "EcsVpcIGWF80402C4",
        },
        "RouteTableId": {
          "Ref": "EcsVpcPublicSubnet1RouteTable3F836709",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "EcsVpcPublicSubnet1EIP97CC60E8": {
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PublicSubnet1",
          },
        ],
      },
      "Type": "AWS::EC2::EIP",
    },
    "EcsVpcPublicSubnet1NATGateway84F4640B": {
      "DependsOn": [
        "EcsVpcPublicSubnet1DefaultRoute29B4D851",
        "EcsVpcPublicSubnet1RouteTableAssociation27B0B1F1",
      ],
      "Properties": {
        "AllocationId": {
          "Fn::GetAtt": [
            "EcsVpcPublicSubnet1EIP97CC60E8",
            "AllocationId",
          ],
        },
        "SubnetId": {
          "Ref": "EcsVpcPublicSubnet1Subnet4FC26CFD",
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PublicSubnet1",
          },
        ],
      },
      "Type": "AWS::EC2::NatGateway",
    },
    "EcsVpcPublicSubnet1RouteTable3F836709": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PublicSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "EcsVpcPublicSubnet1RouteTableAssociation27B0B1F1": {
      "Properties": {
        "RouteTableId": {
          "Ref": "EcsVpcPublicSubnet1RouteTable3F836709",
        },
        "SubnetId": {
          "Ref": "EcsVpcPublicSubnet1Subnet4FC26CFD",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "EcsVpcPublicSubnet1Subnet4FC26CFD": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            0,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.0.0/18",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PublicSubnet1",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "EcsVpcPublicSubnet2DefaultRouteD785541D": {
      "DependsOn": [
        "EcsVpcVPCGWE2526015",
      ],
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "EcsVpcIGWF80402C4",
        },
        "RouteTableId": {
          "Ref": "EcsVpcPublicSubnet2RouteTable259A8B2D",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "EcsVpcPublicSubnet2RouteTable259A8B2D": {
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PublicSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "EcsVpcPublicSubnet2RouteTableAssociation6449DB9B": {
      "Properties": {
        "RouteTableId": {
          "Ref": "EcsVpcPublicSubnet2RouteTable259A8B2D",
        },
        "SubnetId": {
          "Ref": "EcsVpcPublicSubnet2Subnet127B1F4A",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "EcsVpcPublicSubnet2Subnet127B1F4A": {
      "Properties": {
        "AvailabilityZone": {
          "Fn::Select": [
            1,
            {
              "Fn::GetAZs": "",
            },
          ],
        },
        "CidrBlock": "10.0.64.0/18",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          {
            "Key": "Name",
            "Value": "test/EcsVpc/PublicSubnet2",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "EcsVpcVPCGWE2526015": {
      "Properties": {
        "InternetGatewayId": {
          "Ref": "EcsVpcIGWF80402C4",
        },
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::VPCGatewayAttachment",
    },
    "HelloWorldService36ED7EB6": {
      "DependsOn": [
        "HelloWorldServiceLBPublicListenerECSGroup63BD356F",
        "HelloWorldServiceLBPublicListener22A49231",
        "HelloWorldServiceTaskDefTaskRole0AF7155B",
      ],
      "Properties": {
        "Cluster": {
          "Ref": "EcsCluster97242B84",
        },
        "DeploymentConfiguration": {
          "Alarms": {
            "AlarmNames": [],
            "Enable": false,
            "Rollback": false,
          },
          "MaximumPercent": 200,
          "MinimumHealthyPercent": 50,
        },
        "DesiredCount": 2,
        "EnableECSManagedTags": false,
        "HealthCheckGracePeriodSeconds": 60,
        "LaunchType": "FARGATE",
        "LoadBalancers": [
          {
            "ContainerName": "web",
            "ContainerPort": 80,
            "TargetGroupArn": {
              "Ref": "HelloWorldServiceLBPublicListenerECSGroup63BD356F",
            },
          },
        ],
        "NetworkConfiguration": {
          "AwsvpcConfiguration": {
            "AssignPublicIp": "DISABLED",
            "SecurityGroups": [
              {
                "Fn::GetAtt": [
                  "HelloWorldServiceSecurityGroup5F3BD4A7",
                  "GroupId",
                ],
              },
            ],
            "Subnets": [
              {
                "Ref": "EcsVpcPrivateSubnet1SubnetDE1C6717",
              },
              {
                "Ref": "EcsVpcPrivateSubnet2Subnet4E5EDAB1",
              },
            ],
          },
        },
        "TaskDefinition": {
          "Ref": "HelloWorldServiceTaskDef17C5487C",
        },
      },
      "Type": "AWS::ECS::Service",
    },
    "HelloWorldServiceLB7C80B268": {
      "DependsOn": [
        "EcsVpcPublicSubnet1DefaultRoute29B4D851",
        "EcsVpcPublicSubnet1RouteTableAssociation27B0B1F1",
        "EcsVpcPublicSubnet2DefaultRouteD785541D",
        "EcsVpcPublicSubnet2RouteTableAssociation6449DB9B",
      ],
      "Properties": {
        "LoadBalancerAttributes": [
          {
            "Key": "deletion_protection.enabled",
            "Value": "false",
          },
        ],
        "Scheme": "internet-facing",
        "SecurityGroups": [
          {
            "Fn::GetAtt": [
              "HelloWorldServiceLBSecurityGroup05C4B30B",
              "GroupId",
            ],
          },
        ],
        "Subnets": [
          {
            "Ref": "EcsVpcPublicSubnet1Subnet4FC26CFD",
          },
          {
            "Ref": "EcsVpcPublicSubnet2Subnet127B1F4A",
          },
        ],
        "Type": "application",
      },
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
    },
    "HelloWorldServiceLBPublicListener22A49231": {
      "Properties": {
        "DefaultActions": [
          {
            "TargetGroupArn": {
              "Ref": "HelloWorldServiceLBPublicListenerECSGroup63BD356F",
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": {
          "Ref": "HelloWorldServiceLB7C80B268",
        },
        "Port": 80,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "HelloWorldServiceLBPublicListenerECSGroup63BD356F": {
      "Properties": {
        "HealthCheckIntervalSeconds": 30,
        "HealthCheckPath": "/",
        "Port": 80,
        "Protocol": "HTTP",
        "TargetGroupAttributes": [
          {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "HelloWorldServiceLBSecurityGroup05C4B30B": {
      "Properties": {
        "GroupDescription": "Automatically created Security Group for ELB testHelloWorldServiceLB024A3330",
        "SecurityGroupIngress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 80",
            "FromPort": 80,
            "IpProtocol": "tcp",
            "ToPort": 80,
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "HelloWorldServiceLBSecurityGrouptotestHelloWorldServiceSecurityGroup60E0BA7280A98F7225": {
      "Properties": {
        "Description": "Load balancer to target",
        "DestinationSecurityGroupId": {
          "Fn::GetAtt": [
            "HelloWorldServiceSecurityGroup5F3BD4A7",
            "GroupId",
          ],
        },
        "FromPort": 80,
        "GroupId": {
          "Fn::GetAtt": [
            "HelloWorldServiceLBSecurityGroup05C4B30B",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupEgress",
    },
    "HelloWorldServiceSecurityGroup5F3BD4A7": {
      "DependsOn": [
        "HelloWorldServiceTaskDefTaskRole0AF7155B",
      ],
      "Properties": {
        "GroupDescription": "test/HelloWorldService/Service/SecurityGroup",
        "SecurityGroupEgress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "VpcId": {
          "Ref": "EcsVpcCEF3634B",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "HelloWorldServiceSecurityGroupfromtestHelloWorldServiceLBSecurityGroupE180D69E80E604010D": {
      "DependsOn": [
        "HelloWorldServiceTaskDefTaskRole0AF7155B",
      ],
      "Properties": {
        "Description": "Load balancer to target",
        "FromPort": 80,
        "GroupId": {
          "Fn::GetAtt": [
            "HelloWorldServiceSecurityGroup5F3BD4A7",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": {
          "Fn::GetAtt": [
            "HelloWorldServiceLBSecurityGroup05C4B30B",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "HelloWorldServiceTaskDef17C5487C": {
      "Properties": {
        "ContainerDefinitions": [
          {
            "Essential": true,
            "Image": "amazon/amazon-ecs-sample",
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": {
                  "Ref": "HelloWorldServiceTaskDefwebLogGroup85B2B7D4",
                },
                "awslogs-region": {
                  "Ref": "AWS::Region",
                },
                "awslogs-stream-prefix": "HelloWorldService",
              },
            },
            "Name": "web",
            "PortMappings": [
              {
                "ContainerPort": 80,
                "Protocol": "tcp",
              },
            ],
          },
        ],
        "Cpu": "256",
        "ExecutionRoleArn": {
          "Fn::GetAtt": [
            "HelloWorldServiceTaskDefExecutionRole19BA93E1",
            "Arn",
          ],
        },
        "Family": "testHelloWorldServiceTaskDef6B62C5F7",
        "Memory": "512",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": [
          "FARGATE",
        ],
        "TaskRoleArn": {
          "Fn::GetAtt": [
            "HelloWorldServiceTaskDefTaskRole0AF7155B",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ECS::TaskDefinition",
    },
    "HelloWorldServiceTaskDefExecutionRole19BA93E1": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "HelloWorldServiceTaskDefExecutionRoleDefaultPolicyDAAEB0BF": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "HelloWorldServiceTaskDefwebLogGroup85B2B7D4",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "HelloWorldServiceTaskDefExecutionRoleDefaultPolicyDAAEB0BF",
        "Roles": [
          {
            "Ref": "HelloWorldServiceTaskDefExecutionRole19BA93E1",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "HelloWorldServiceTaskDefTaskRole0AF7155B": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::Role",
    },
    "HelloWorldServiceTaskDefwebLogGroup85B2B7D4": {
      "DeletionPolicy": "Retain",
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "SloganApiAccount7298EC58": {
      "DeletionPolicy": "Retain",
      "DependsOn": [
        "SloganApiCE741B91",
      ],
      "Properties": {
        "CloudWatchRoleArn": {
          "Fn::GetAtt": [
            "SloganApiCloudWatchRoleEE348950",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ApiGateway::Account",
      "UpdateReplacePolicy": "Retain",
    },
    "SloganApiCE741B91": {
      "Properties": {
        "Description": "API for retrieving random slogans",
        "Name": "Slogan Service",
      },
      "Type": "AWS::ApiGateway::RestApi",
    },
    "SloganApiCloudWatchRoleEE348950": {
      "DeletionPolicy": "Retain",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "apigateway.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
      "UpdateReplacePolicy": "Retain",
    },
    "SloganApiDeploymentEE6F43EC8880cff2a1ff8fca364a1d183ab3c1ce": {
      "DependsOn": [
        "SloganApiOPTIONS6E73DF2C",
        "SloganApislogansOPTIONSF8944C44",
        "SloganApislogansrandomGET0722CDC5",
        "SloganApislogansrandomOPTIONS3724D5F7",
        "SloganApislogansrandomD8CAA1EC",
        "SloganApislogans775A04F4",
      ],
      "Metadata": {
        "aws:cdk:do-not-refactor": true,
      },
      "Properties": {
        "Description": "API for retrieving random slogans",
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Deployment",
    },
    "SloganApiDeploymentStageprod489F153F": {
      "DependsOn": [
        "SloganApiAccount7298EC58",
      ],
      "Properties": {
        "DeploymentId": {
          "Ref": "SloganApiDeploymentEE6F43EC8880cff2a1ff8fca364a1d183ab3c1ce",
        },
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
        "StageName": "prod",
      },
      "Type": "AWS::ApiGateway::Stage",
    },
    "SloganApiOPTIONS6E73DF2C": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Fn::GetAtt": [
            "SloganApiCE741B91",
            "RootResourceId",
          ],
        },
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "SloganApiSloganHandler60D7C325": {
      "DependsOn": [
        "SloganApiSloganHandlerServiceRoleDefaultPolicy6CF9FA7B",
        "SloganApiSloganHandlerServiceRoleECEA30F0",
      ],
      "Properties": {
        "Code": {
          "ZipFile": "
const { DynamoDBClient, ScanCommand } = require('@aws-sdk/client-dynamodb');
const { unmarshall } = require('@aws-sdk/util-dynamodb');

const client = new DynamoDBClient({});

exports.handler = async (event) => {
  try {
    const command = new ScanCommand({
      TableName: process.env.TABLE_NAME,
    });
    
    const response = await client.send(command);
    
    if (!response.Items || response.Items.length === 0) {
      return {
        statusCode: 404,
        headers: {
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*',
        },
        body: JSON.stringify({ message: 'No slogans found' }),
      };
    }
    
    const items = response.Items.map(item => unmarshall(item));
    const randomSlogan = items[Math.floor(Math.random() * items.length)];
    
    return {
      statusCode: 200,
      headers: {
        'Content-Type': 'application/json',
        'Access-Control-Allow-Origin': '*',
      },
      body: JSON.stringify(randomSlogan),
    };
  } catch (error) {
    console.error('Error:', error);
    return {
      statusCode: 500,
      headers: {
        'Content-Type': 'application/json',
        'Access-Control-Allow-Origin': '*',
      },
      body: JSON.stringify({ message: 'Internal server error' }),
    };
  }
};
      ",
        },
        "Environment": {
          "Variables": {
            "TABLE_NAME": {
              "Ref": "SloganApiSloganTableCB6C1B43",
            },
          },
        },
        "Handler": "index.handler",
        "Role": {
          "Fn::GetAtt": [
            "SloganApiSloganHandlerServiceRoleECEA30F0",
            "Arn",
          ],
        },
        "Runtime": "nodejs20.x",
      },
      "Type": "AWS::Lambda::Function",
    },
    "SloganApiSloganHandlerServiceRoleDefaultPolicy6CF9FA7B": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "dynamodb:BatchGetItem",
                "dynamodb:Query",
                "dynamodb:GetItem",
                "dynamodb:Scan",
                "dynamodb:ConditionCheckItem",
                "dynamodb:DescribeTable",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "SloganApiSloganTableCB6C1B43",
                  "Arn",
                ],
              },
            },
            {
              "Action": [
                "dynamodb:GetRecords",
                "dynamodb:GetShardIterator",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "SloganApiSloganTableCB6C1B43",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "SloganApiSloganHandlerServiceRoleDefaultPolicy6CF9FA7B",
        "Roles": [
          {
            "Ref": "SloganApiSloganHandlerServiceRoleECEA30F0",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "SloganApiSloganHandlerServiceRoleECEA30F0": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "SloganApiSloganTableCB6C1B43": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "AttributeDefinitions": [
          {
            "AttributeName": "id",
            "AttributeType": "S",
          },
        ],
        "BillingMode": "PAY_PER_REQUEST",
        "KeySchema": [
          {
            "AttributeName": "id",
            "KeyType": "HASH",
          },
        ],
      },
      "Type": "AWS::DynamoDB::Table",
      "UpdateReplacePolicy": "Delete",
    },
    "SloganApislogans775A04F4": {
      "Properties": {
        "ParentId": {
          "Fn::GetAtt": [
            "SloganApiCE741B91",
            "RootResourceId",
          ],
        },
        "PathPart": "slogans",
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "SloganApislogansOPTIONSF8944C44": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "SloganApislogans775A04F4",
        },
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "SloganApislogansrandomD8CAA1EC": {
      "Properties": {
        "ParentId": {
          "Ref": "SloganApislogans775A04F4",
        },
        "PathPart": "random",
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Resource",
    },
    "SloganApislogansrandomGET0722CDC5": {
      "Properties": {
        "AuthorizationType": "NONE",
        "HttpMethod": "GET",
        "Integration": {
          "IntegrationHttpMethod": "POST",
          "Type": "AWS_PROXY",
          "Uri": {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition",
                },
                ":apigateway:",
                {
                  "Ref": "AWS::Region",
                },
                ":lambda:path/2015-03-31/functions/",
                {
                  "Fn::GetAtt": [
                    "SloganApiSloganHandler60D7C325",
                    "Arn",
                  ],
                },
                "/invocations",
              ],
            ],
          },
        },
        "ResourceId": {
          "Ref": "SloganApislogansrandomD8CAA1EC",
        },
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
    "SloganApislogansrandomGETApiPermissionTesttestSloganApiEF2B0E9EGETslogansrandomAE591078": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "SloganApiSloganHandler60D7C325",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "SloganApiCE741B91",
              },
              "/test-invoke-stage/GET/slogans/random",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "SloganApislogansrandomGETApiPermissiontestSloganApiEF2B0E9EGETslogansrandom7000E60C": {
      "Properties": {
        "Action": "lambda:InvokeFunction",
        "FunctionName": {
          "Fn::GetAtt": [
            "SloganApiSloganHandler60D7C325",
            "Arn",
          ],
        },
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition",
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region",
              },
              ":",
              {
                "Ref": "AWS::AccountId",
              },
              ":",
              {
                "Ref": "SloganApiCE741B91",
              },
              "/",
              {
                "Ref": "SloganApiDeploymentStageprod489F153F",
              },
              "/GET/slogans/random",
            ],
          ],
        },
      },
      "Type": "AWS::Lambda::Permission",
    },
    "SloganApislogansrandomOPTIONS3724D5F7": {
      "Properties": {
        "ApiKeyRequired": false,
        "AuthorizationType": "NONE",
        "HttpMethod": "OPTIONS",
        "Integration": {
          "IntegrationResponses": [
            {
              "ResponseParameters": {
                "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
                "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
                "method.response.header.Access-Control-Allow-Origin": "'*'",
              },
              "StatusCode": "204",
            },
          ],
          "RequestTemplates": {
            "application/json": "{ statusCode: 200 }",
          },
          "Type": "MOCK",
        },
        "MethodResponses": [
          {
            "ResponseParameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true,
            },
            "StatusCode": "204",
          },
        ],
        "ResourceId": {
          "Ref": "SloganApislogansrandomD8CAA1EC",
        },
        "RestApiId": {
          "Ref": "SloganApiCE741B91",
        },
      },
      "Type": "AWS::ApiGateway::Method",
    },
  },
  "Rules": {
    "CheckBootstrapVersion": {
      "Assertions": [
        {
          "Assert": {
            "Fn::Not": [
              {
                "Fn::Contains": [
                  [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;
